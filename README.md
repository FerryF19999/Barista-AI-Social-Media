<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
</div>

# Run and deploy your AI Studio app

This contains everything you need to run your app locally.

View your app in AI Studio: https://ai.studio/apps/drive/15FPnpECp6G1ENImCKFUVJkjIv4bMYriF

## Run Locally

**Prerequisites:**  Node.js


1. Install dependencies: `npm install`
2. Create a Supabase project and set the following environment variables in `.env.local`:

   ```
   # Either Vite-style keys …
   VITE_SUPABASE_URL=your-project-url
   VITE_SUPABASE_ANON_KEY=your-anon-key

   # …or Next.js style keys (NEXT_PUBLIC_SUPABASE_*)
   NEXT_PUBLIC_SUPABASE_URL=your-project-url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

   GEMINI_API_KEY=your-gemini-key
   ```

   > ℹ️ The app looks for `VITE_SUPABASE_*`, `NEXT_PUBLIC_SUPABASE_*`, or `SUPABASE_*` values (including ones exposed via `window.__env`/`window.config`) so you can reuse the `.env` generated by the Supabase + Next.js quickstart without any renaming. When no variables are provided, the starter falls back to the sample project whose credentials are listed above so you can experiment immediately.

   For automated migrations you will also need the database connection string
   from your Supabase project's settings (labeled **Connection string** under
   the **Project Settings → Database** page). Export it as `SUPABASE_DB_URL` or
   `DATABASE_URL` before running the migration/seed scripts below.

3. Provision the required tables inside Supabase. Supply the database
   connection string from your project's dashboard as
   `SUPABASE_DB_URL` (or `DATABASE_URL`) and run:

   ```bash
   SUPABASE_DB_URL="postgresql://postgres:YOUR_PASSWORD@db.<ref>.supabase.co:6543/postgres" \
     npm run supabase:migrate
   ```

   The script automatically executes the SQL in
   `supabase/migrations/20241011120000_init.sql`, creating the `profiles` and
   `posts` tables, adding indexes, and enabling the RLS policies the app
   expects. If you prefer to perform the steps manually, open the file and
   paste its contents into the Supabase SQL Editor.

4. (Optional) Seed Supabase with the same mock data used by the local fallback
   store so the UI has content immediately:

   ```bash
   SUPABASE_DB_URL="postgresql://postgres:YOUR_PASSWORD@db.<ref>.supabase.co:6543/postgres" \
     npm run supabase:seed
   ```

   You can re-run the seed whenever you want to reset the demo data—it upserts
   the profiles and posts so existing changes are preserved if their IDs match.
   To run the migration and seed together, execute `npm run supabase:setup` with
   the same connection string environment variable.

5. Enable Realtime for the `profiles` and `posts` tables so every mutation is
   pushed instantly to all connected clients.

6. Run the app: `npm run dev`

### Next.js Supabase sample

If you are following the Supabase + Next.js quickstart, a minimal example lives in
`next-app/`. It demonstrates how to wire the official `@supabase/ssr` helpers for
Server Components, middleware, and client components while querying the `notes`
table created in the tutorial. To try it:

1. Copy your Supabase credentials into `next-app/.env.local` as
   `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY`.
2. Run `npm install` inside a Next.js project (or create one with
   `npx create-next-app@latest`) and copy the `next-app` directory into it.
3. Visit `/notes` to confirm the server-rendered page lists the records from your
   Supabase `notes` table.

Feel free to adapt the utility helpers under `next-app/utils/supabase` for more
advanced queries or authenticated flows.

## Troubleshooting

### "failed to update branch" when syncing with a remote

GitHub and other hosting providers will surface a **"failed to update branch"**
banner on pull requests when the branch cannot be fast-forwarded to the latest
default branch. This typically means your local branch is missing commits that
were pushed to `main`/`master` after you started your work.

To resolve the warning:

1. Fetch the latest default-branch commits from your remote.

   ```bash
   git fetch origin main
   ```

2. Rebase (or merge) your feature branch on top of the freshly fetched
   `origin/main`.

   ```bash
   git rebase origin/main
   # -- or --
   # git merge origin/main
   ```

3. Resolve any merge conflicts that appear, run the project tests/build, and
   push the updated branch.

   ```bash
   npm run build
   git push --force-with-lease
   ```

Once your branch contains the latest upstream commits, GitHub will automatically
clear the message and allow the PR to be merged.

### "fatal: No configured push destination" when creating a PR

This repo runs inside a disposable environment that does not come with a remote
configured by default. If you try to run `git push` (or open a pull request)
without first adding a remote, Git will abort with the following error message:

```
fatal: No configured push destination.
```

To resolve the issue, point the local repository at your Supabase app's GitHub
project (or any other remote) before pushing:

```bash
git remote add origin https://github.com/<your-org>/<your-repo>.git
git push -u origin work
```

Once the remote is configured you can push normally and open a pull request in
your Git hosting provider.
